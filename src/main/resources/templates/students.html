<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<title>Students</title>
	<!-- JQuery -->
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
	
	<!-- Bootstrap -->
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
	
	<!-- JQuery UI -->
	<link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
	<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
	
	<script type="text/javascript">
		function openStudentModal(id){
			$.ajax({
				url: "/student/" + id,
				success: function(data){
					$("#studentModalHolder").html(data);
					$('#studentModal').modal();

				}
			});
		}
		
		function openDeleteModal(id){
			$.ajax({
				url: "/delete-student/" + id,
				success: function(data){
					$("#deleteStudentModalHolder").html(data);
					$('#deleteStudentModal').modal();

				}
			});
		}
		
		function openEditModal(id){
			$.ajax({
				url: "/edit-student/" + id,
				success: function(data){
					$("#editStudentModalHolder").html(data);
					$('#editStudentModal').modal();
				}
			});
		}
		
		function openAddStudentModal(){
			$.ajax({
				url: "/add-student",
				success: function(data){
					$("#addStudentModalHolder").html(data);
					$('#addStudentModal').modal();
				}
			});
		}
	</script>
	
	<script type="text/javascript">
		//Date picker
		$( function() {
		   $( "#datepicker" ).datepicker();
		 } ); 
		
		 $( function() {
			   $( "#datepicker2" ).datepicker({
					 dateFormat: 'dd/mm/yy',
					 defaultDate: new Date(),
					 changeMonth: true,
					 changeYear: true
				});
		 } );
		 
		 $( "#datepicker" ).datepicker({
			 dateFormat: 'dd/mm/yy',
			 defaultDate: new Date(),
			 changeMonth: true,
			 changeYear: true
		});

		$('#datepicker').css("z-index","0");
		 
	</script> 
</head>

<body>
	<div class="container">
	
		<h1>Students</h1>
		<div class="">
			<a href="#" th:onclick="'javascript:openAddStudentModal();'" class="btn btn-info btn-md">
		    	<span class="glyphicon glyphicon-plus"></span><span> Add New Student</span>
			</a>
			<p></p>
		</div>
		<div class="table-responsive">
			<table class="table">
				<tr>
					<th>Id</th>
					<th>Name</th>
					<th>Last Name</th>
					<th>Operations</th>
				</tr>
				<tr th:each="student : ${students}">
					<td th:text="${student.id}"></td>
					<td th:text="${student.name}"></td>
					<td th:text="${student.lastName}"></td>
					<td>
						<a href="#" th:onclick="'javascript:openStudentModal(\''+ ${student.id} + '\');'" class="btn btn-info btn-xs">
					    	<span class="glyphicon glyphicon-list-alt"></span> 
						</a>
						<a href="#" th:onclick="'javascript:openEditModal(\''+ ${student.id} + '\');'" class="btn btn-success btn-xs">
					    	<span class="glyphicon glyphicon-pencil"></span> 
						</a>
						<a href="#" th:onclick="'javascript:openDeleteModal(\''+ ${student.id} + '\');'" class="btn btn-danger btn-xs">
					    	<span class="glyphicon glyphicon-trash"></span> 
						</a>
					</td>
				</tr>
			</table>
		</div>
		<input type="text" id="datepicker2" class="form-control">
		
		
	</div>
	
	<!-- modal -->
	<div th:fragment="student" id="studentModalHolder"></div>
	<div th:fragment="delete-student" id="deleteStudentModalHolder"></div>
	<div th:fragment="edit-student" id="editStudentModalHolder"></div>
	<div th:fragment="add-student" id="addStudentModalHolder"></div>
	
</body>
</html>